version: 2.1
jobs:
    build:
        machine:
            image: ubuntu-1604:202004-01
        working_directory: ~/build
        steps:
            - checkout
            - sudo apt update
            - wget https://github.com/gohugoio/hugo/releases/download/v0.78.2/hugo_extended_0.78.2_Linux-64bit.deb
            - sudo apt -y install ./hugo_extended_0.78.2_Linux-64bit.deb
            - sudo apt -y install snapd
            - sudo snap install --classic go
            - hugo --ignoreCache=true --minify
workflows:
  version: 2
  build-and-deploy:
    jobs:
      - build
      - attach_workspace:
          at: ~/build
